<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Laporan Kunjungan Rumah</title>
    <script src="https://unpkg.com/docx@8.5.0/build/index.umd.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <div class="container">
        <h1>GENERATOR LAPORAN KUNJUNGAN RUMAH<br />PUSKESMAS BALAS KLUMPRIK</h1>

        <form id="laporanForm">
            <!-- Opsi Jumlah Laporan -->
            <div class="form-group">
                <label for="jumlahLaporan">Jumlah Laporan dalam 1 Dokumen:</label>
                <select id="jumlahLaporan" required>
            <option value="1" selected>1 Laporan</option>
            <option value="2">2 Laporan</option>
            <option value="3">3 Laporan</option>
            <option value="4">4 Laporan</option>
            <option value="5">5 Laporan</option>
            <option value="6">6 Laporan</option>
            <option value="7">7 Laporan</option>
            <option value="8">8 Laporan</option>
            <option value="9">9 Laporan</option>
            <option value="10">10 Laporan</option>
          </select>
            </div>

            <div class="row">
                <div class="col">
                    <div class="form-group">
                        <label for="bulan">Bulan Laporan:</label>
                        <select id="bulan" required>
                <option value="">Pilih Bulan</option>
                <option value="JANUARI">Januari</option>
                <option value="FEBRUARI">Februari</option>
                <option value="MARET">Maret</option>
                <option value="APRIL">April</option>
                <option value="MEI">Mei</option>
                <option value="JUNI">Juni</option>
                <option value="JULI">Juli</option>
                <option value="AGUSTUS">Agustus</option>
                <option value="SEPTEMBER">September</option>
                <option value="OKTOBER">Oktober</option>
                <option value="NOVEMBER">November</option>
                <option value="DESEMBER">Desember</option>
              </select>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="tahun">Tahun Laporan:</label>
                        <input type="number" id="tahun" min="2020" max="2030" required />
                    </div>
                </div>
            </div>

            <!-- Container untuk form laporan yang akan di-generate dinamis -->
            <div id="laporanContainer">
                <!-- Form laporan pertama (default) -->
                <div class="laporan-section" data-laporan="1">
                    <h3 class="laporan-title">Laporan 1</h3>

                    <div class="form-group">
                        <label for="tanggal_1">Tanggal:</label>
                        <input type="date" id="tanggal_1" name="tanggal_1" required />
                    </div>

                    <div class="row">
                        <div class="col">
                            <div class="form-group">
                                <label for="nama_1">Nama:</label>
                                <input type="text" id="nama_1" name="nama_1" required />
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="usia_1">Usia (tahun):</label>
                                <input type="number" id="usia_1" name="usia_1" required />
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="alamat_1">Alamat:</label>
                        <input type="text" id="alamat_1" name="alamat_1" required />
                    </div>

                    <div class="row">
                        <div class="col">
                            <div class="form-group">
                                <label for="beratBadan_1">Berat Badan (kg):</label>
                                <input type="number" step="0.1" id="beratBadan_1" name="beratBadan_1" required />
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="tinggiBadan_1">Tinggi Badan (cm):</label>
                                <input type="number" id="tinggiBadan_1" name="tinggiBadan_1" required />
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col">
                            <div class="form-group">
                                <label for="lingkarPerut_1">Lingkar Perut (cm):</label>
                                <input type="number" id="lingkarPerut_1" name="lingkarPerut_1" required />
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="tensi_1">Tensi:</label>
                                <input type="text" id="tensi_1" name="tensi_1" placeholder="contoh: 120/80" required />
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="keluhan_1">Keluhan / Permasalahan:</label>
                        <textarea id="keluhan_1" name="keluhan_1" required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="tindakLanjut_1">Tindak Lanjut:</label>
                        <textarea id="tindakLanjut_1" name="tindakLanjut_1" required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="kader_1">Kader yang melakukan kunjungan rumah:</label>
                        <input type="text" id="kader_1" name="kader_1" required />
                    </div>

                    <div class="form-group">
                        <label for="foto_1">Foto Geotag (opsional):</label>
                        <input type="file" id="foto_1" name="foto_1" accept="image/*" />
                        <div class="file-info">
                            Foto akan dikompres otomatis (max 1200px, ≤300KB)
                        </div>
                        <div class="photo-preview" id="photoPreview_1"></div>
                    </div>
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="progress-container" id="progressContainer" style="display: none">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">Memulai proses...</div>
                <div class="progress-percentage" id="progressPercentage">0%</div>
            </div>

            <div class="loading" id="loading" style="display: none">
                Memproses foto dan membuat dokumen...
            </div>
            <div class="success" id="success" style="display: none">
                ✓ Dokumen berhasil dibuat dan didownload!
            </div>

            <button type="submit" id="generateBtn">Generate Word (.docx)</button>
        </form>
    </div>

    <!-- Floating WhatsApp Button -->
    <div class="whatsapp-float" id="whatsappFloat">
        <div class="whatsapp-icon">
            <svg viewBox="0 0 24 24" width="28" height="28" fill="white">
          <path
            d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.46 3.516"
          />
        </svg>
        </div>
        <div class="whatsapp-tooltip">Hubungi Developer</div>
    </div>
    <!-- Tambahkan di dalam <body>, sebelum </body> -->
    <div id="qrisModal" style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        justify-content: center;
        align-items: center;
      ">
        <div style="
          background: white;
          padding: 20px;
          border-radius: 10px;
          text-align: center;
          max-width: 300px;
        ">
            <h3>Support Developer</h3>
            <p>Scan QRIS berikut untuk support:</p>
            <img src="qris.png" alt="QRIS" style="width: 250px; border-radius: 10px" />
            <br /><br />
            <button onclick="closeQris()" style="
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            background: #3498db;
            color: white;
            cursor: pointer;
          ">
          Tutup
        </button>
        </div>
    </div>

    <script>
        // Event untuk link Support Developer
        document
            .getElementById("supportDeveloperLink")
            .addEventListener("click", function(e) {
                e.preventDefault();
                document.getElementById("qrisModal").style.display = "flex";
            });

        function closeQris() {
            document.getElementById("qrisModal").style.display = "none";
        }
    </script>

    <!-- Include Footer -->
    <iframe src="footer.html" style="width: 100%; height: 550px; border: none"></iframe>

    <script src="script.js"></script>
</body>

</html>